<!DOCTYPE html>
<html lang='ja'>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width, initial-scale=1.0'>
<title>店舗管理システム</title>
<link rel='stylesheet' href='../common/ui.css'>
<style>
    /* 画面切り替え用 */
    .view-section { display: none; animation: fadeIn 0.3s; }
    .view-section.active { display: block; }
    @keyframes fadeIn { from { opacity: 0.5; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
</style>
</head>
<body>

<div id='login-overlay'>
    <div class='modal-content' style='text-align:center;'>
        <h2>管理ログイン</h2>
        <div class='form-group'><label>ID</label><input type='text' id='inp-shop-id'></div>
        <div class='form-group'><label>PASSWORD</label><input type='password' id='inp-password'></div>
        <button id='btn-login' class='btn-primary' style='width:100%;'>ログイン</button>
    </div>
</div>

<div id='app-container'>
    <nav id='sidebar'>
        <h2><span>DEMO</span> SHOP</h2>
        <a onclick="UI.navigate('home')" class='menu-item active' id='nav-home'>ホーム / ダッシュボード</a>
        <a onclick="UI.navigate('casts')" class='menu-item' id='nav-casts'>キャスト管理</a>
        <a onclick="UI.navigate('schedule')" class='menu-item' id='nav-schedule'>出勤シフト管理</a>
        <a onclick="UI.navigate('menu')" class='menu-item' id='nav-menu'>メニュー・料金管理</a>
        <a onclick="UI.navigate('reservations')" class='menu-item' id='nav-reservations'>予約リスト</a>
        <div style="margin-top:auto; border-top:1px solid #334155;">
            <a class='menu-item' onclick='localStorage.clear(); location.reload();'>ログアウト</a>
        </div>
    </nav>

    <main id='main-content'>
        <div id='view-home' class='view-section active'>
            <div class='card'>
                <h3>お知らせ</h3>
                <p style='color:#64748b;'>システムは正常に稼働しています。</p>
                <p>左のメニューから操作を選択してください。</p>
            </div>
        </div>

        <div id='view-casts' class='view-section'>
            <div class='card'>
                <div style='display:flex; justify-content:space-between; align-items:center;'>
                    <h3>キャスト一覧</h3>
                    <button id='btn-new-cast' class='btn-primary'>＋ 新規登録</button>
                </div>
                <table><thead><tr><th>名前</th><th>年齢</th><th>状態</th><th>操作</th></tr></thead><tbody id='cast-list'></tbody></table>
            </div>
        </div>

        <div id='view-schedule' class='view-section'>
            <div class='card'>
                <h3>出勤シフト入力 (30分単位)</h3>
                <div style='background:#f8fafc; padding:20px; border-radius:8px; margin-bottom:20px; border:1px solid #e2e8f0;'>
                    <label style='font-weight:bold; margin-right:10px;'>対象キャスト:</label>
                    <select id='ws-cast' style='width:300px;'></select>
                </div>
                <div id='ws-container' style='border:1px solid #e2e8f0; border-radius:8px; overflow:hidden;'>
                    <div style='padding:40px; text-align:center; color:#94a3b8;'>キャストを選択してください</div>
                </div>
                <div style='margin-top:30px; text-align:right;'>
                    <button id='btn-save-weekly' class='btn-primary' style='min-width:200px;'>シフトを保存する</button>
                </div>
            </div>
        </div>

        <div id='view-menu' class='view-section'>
            <div class='card'>
                <div style='display:flex; justify-content:space-between; align-items:center;'>
                    <h3 style="margin:0; border:none;">コース管理</h3>
                    <button id='btn-new-course' class='btn-primary' style="background:#2563eb;">＋ コース追加</button>
                </div>
                <p style="color:#64748b; font-size:14px; margin-bottom:20px;">※基本料金となる時間制コースの設定です。</p>
                <table><thead><tr><th>コース名</th><th>料金</th><th>時間 (指名料)</th><th>対象</th><th>操作</th></tr></thead><tbody id='course-list'></tbody></table>
            </div>
            <div class='card'>
                <div style='display:flex; justify-content:space-between; align-items:center;'>
                    <h3 style="margin:0; border:none;">オプション管理</h3>
                    <button id='btn-new-option' class='btn-primary' style="background:#059669;">＋ オプション追加</button>
                </div>
                <p style="color:#64748b; font-size:14px; margin-bottom:20px;">※指名料や延長料などのオプション設定です。</p>
                <table><thead><tr><th>オプション名</th><th>料金</th><th>対象</th><th>操作</th></tr></thead><tbody id='option-list'></tbody></table>
            </div>
        </div>

        <div id='view-reservations' class='view-section'>
            <div class='card'>
                <h3>予約リクエスト一覧</h3>
                <p style='color:#64748b; margin-bottom:20px;'>※ お客様からの予約を確認し、確定または却下を行ってください。</p>
                <table><thead><tr><th>希望日時</th><th>指名キャスト</th><th>お客様名</th><th>TEL</th><th>コース</th><th>ステータス</th><th>操作</th></tr></thead><tbody id='res-list'></tbody></table>
            </div>
        </div>
    </main>
</div>

<div id='cast-modal' class='hidden modal-overlay'>
    <div class='modal-content'>
        <h3>キャスト編集</h3>
        <form id='form-cast' onsubmit='return false;'>
            <input type='hidden' id='c-id'>
            <div class='form-group'><label>名前</label><input type='text' id='c-name'></div>
            <div style='display:flex; gap:15px;'>
                <div class='form-group' style='flex:1;'><label>年齢</label><select id='c-age'></select></div>
                <div class='form-group' style='flex:1;'><label>身長</label><select id='c-height'></select></div>
            </div>
            <div class='form-group'>
                <label>スリーサイズ</label>
                <div style="display:flex; gap:10px; align-items:center;">
                    <span style="font-weight:bold; color:#888;">B:</span><select id="c-bust" style="width:70px;"></select><select id="c-cup" style="width:80px;"></select>
                    <span style="font-weight:bold; color:#888;">W:</span><select id="c-waist" style="width:70px;"></select>
                    <span style="font-weight:bold; color:#888;">H:</span><select id="c-hip" style="width:70px;"></select>
                </div>
            </div>
            <div class='form-group'><label>写真URL</label><input type='text' id='c-image' placeholder='https://...'></div>
            <div class='form-group'><label>紹介文</label><textarea id='c-intro' rows='3'></textarea></div>
            <div class='form-group'><label>ステータス</label><select id='c-active'><option value='true'>在籍</option><option value='false'>退店</option></select></div>
            <div style='display:flex; gap:10px; margin-top:20px;'>
                <button id='btn-close-modal' style='flex:1; background:#94a3b8; color:white;'>キャンセル</button>
                <button id='btn-save-cast' class='btn-primary' style='flex:1;'>保存</button>
            </div>
        </form>
    </div>
</div>

<div id='menu-modal' class='hidden modal-overlay'>
    <div class='modal-content'>
        <h3 id="modal-title">メニュー編集</h3>
        <form id='form-menu' onsubmit='return false;'>
            <input type='hidden' id='m-id'><input type='hidden' id='m-type'>
            <div class='form-group'><label>名称</label><input type='text' id='m-name'></div>
            
            <div id="input-area-course">
                <div style='display:flex; gap:15px;'>
                    <div class='form-group' style='flex:1;'><label>料金</label><select id='m-price-course'></select></div>
                    <div class='form-group' style='flex:1;'><label>時間</label><select id='m-minutes-course'></select></div>
                </div>
                <div class='form-group'><label>指名料</label><select id='m-fee-course'></select></div>
            </div>

            <div id="input-area-option" class="hidden">
                <div class='form-group'><label>料金 (円)</label><input type='number' id='m-price-option' placeholder="例: 2000"></div>
            </div>

            <div class='form-group'><label>対象キャスト</label><select id='m-cast'><option value='ALL'>全員共通</option></select></div>
            <div style='display:flex; gap:10px; margin-top:20px;'>
                <button id='btn-close-menu-modal' style='flex:1; background:#94a3b8; color:white;'>キャンセル</button>
                <button id='btn-save-menu' class='btn-primary' style='flex:1;'>保存</button>
            </div>
        </form>
    </div>
</div>

<script src='../common/config.js'></script>
<script src='../common/ui.js'></script>
<script>document.addEventListener('DOMContentLoaded', ()=>{UI.init();});</script>
</body>
</html>
